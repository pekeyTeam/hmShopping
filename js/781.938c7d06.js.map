{"version":3,"file":"js/781.938c7d06.js","mappings":"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","sources":["webpack://hmshoping/./src/views/layout/cart.vue","webpack://hmshoping/src/views/layout/cart.vue","webpack://hmshoping/./src/views/layout/cart.vue?1ca3","webpack://hmshoping/./src/views/layout/cart.vue?90ee"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"cart\"},[_c('van-nav-bar',{attrs:{\"title\":\"购物车\",\"fixed\":\"\"}}),(_vm.isToken && _vm.cartList.length > 0)?_c('div',{staticClass:\"cart-box\"},[_c('div',{staticClass:\"cart-title\"},[_c('span',{staticClass:\"all\"},[_vm._v(\"共\"),_c('i',[_vm._v(_vm._s(_vm.getCartCount))]),_vm._v(\"件商品\")]),_c('span',{staticClass:\"edit\",on:{\"click\":function($event){_vm.isEditor = !_vm.isEditor}}},[_c('van-icon',{attrs:{\"name\":\"edit\"}}),_vm._v(\" 编辑 \")],1)]),_c('div',{staticClass:\"cart-list\"},_vm._l((_vm.cartList),function(item){return _c('div',{key:item.goods_id,staticClass:\"cart-item\"},[_c('van-checkbox',{attrs:{\"value\":item.isChecked},on:{\"click\":function($event){return _vm.changeCheck(item.goods_id)}}}),_c('div',{staticClass:\"show\"},[_c('img',{attrs:{\"src\":item.goods.goods_image,\"alt\":\"\"}})]),_c('div',{staticClass:\"info\"},[_c('span',{staticClass:\"tit text-ellipsis-2\"},[_vm._v(_vm._s(item.goods.goods_name))]),_c('span',{staticClass:\"bottom\"},[_c('div',{staticClass:\"price\"},[_vm._v(\" ¥ \"),_c('span',[_vm._v(_vm._s(item.goods.goods_price_min))])]),_c('CountBox',{attrs:{\"value\":item.goods_num},on:{\"input\":(val) => _vm.updateMyCart(val, item.goods_id, item.goods_sku_id)}})],1)])],1)}),0),_c('div',{staticClass:\"footer-fixed\"},[_c('div',{staticClass:\"all-check\",on:{\"click\":_vm.allChecked}},[_c('van-checkbox',{attrs:{\"value\":_vm.isAllChecked,\"icon-size\":\"18\"}}),_vm._v(\" 全选 \")],1),_c('div',{staticClass:\"all-total\"},[_c('div',{staticClass:\"price\"},[_c('span',[_vm._v(\"合计：\")]),_c('span',[_vm._v(\"¥ \"),_c('i',{staticClass:\"totalPrice\"},[_vm._v(_vm._s(_vm.getRePrice))])])]),(_vm.isEditor)?_c('div',{staticClass:\"goPay\",class:{ disabled: _vm.getNeedCount === 0 },on:{\"click\":_vm.goPay}},[_vm._v(\" 结算(\"+_vm._s(_vm.getNeedCount)+\") \")]):_c('div',{staticClass:\"delete\",class:{ disabled: _vm.getNeedCount === 0 },on:{\"click\":_vm.deleteMyCart}},[_vm._v(\" 删除 \")])])])]):_c('div',{staticClass:\"empty-cart\"},[_c('img',{attrs:{\"src\":require(\"@/assets/empty.png\"),\"alt\":\"\"}}),_c('div',{staticClass:\"tips\"},[_vm._v(\"您的购物车是空的, 快去逛逛吧\")]),_c('div',{staticClass:\"btn\",on:{\"click\":function($event){return _vm.$router.push('/')}}},[_vm._v(\"去逛逛\")])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"cart\">\r\n    <van-nav-bar title=\"购物车\" fixed />\r\n    <div class=\"cart-box\" v-if=\"isToken && cartList.length > 0\">\r\n      <!-- 购物车开头 -->\r\n      <div class=\"cart-title\">\r\n        <span class=\"all\"\r\n          >共<i>{{ getCartCount }}</i\r\n          >件商品</span\r\n        >\r\n        <span @click=\"isEditor = !isEditor\" class=\"edit\">\r\n          <van-icon name=\"edit\" />\r\n          编辑\r\n        </span>\r\n      </div>\r\n\r\n      <!-- 购物车列表 -->\r\n      <div class=\"cart-list\">\r\n        <div class=\"cart-item\" v-for=\"item in cartList\" :key=\"item.goods_id\">\r\n          <van-checkbox\r\n            @click=\"changeCheck(item.goods_id)\"\r\n            :value=\"item.isChecked\"\r\n          ></van-checkbox>\r\n          <div class=\"show\">\r\n            <img :src=\"item.goods.goods_image\" alt=\"\" />\r\n          </div>\r\n          <div class=\"info\">\r\n            <span class=\"tit text-ellipsis-2\">{{ item.goods.goods_name }}</span>\r\n            <span class=\"bottom\">\r\n              <div class=\"price\">\r\n                ¥ <span>{{ item.goods.goods_price_min }}</span>\r\n              </div>\r\n              <CountBox\r\n                :value=\"item.goods_num\"\r\n                @input=\"\r\n                  (val) => updateMyCart(val, item.goods_id, item.goods_sku_id)\r\n                \"\r\n              ></CountBox>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"footer-fixed\">\r\n        <div @click=\"allChecked\" class=\"all-check\">\r\n          <van-checkbox :value=\"isAllChecked\" icon-size=\"18\"></van-checkbox>\r\n          全选\r\n        </div>\r\n\r\n        <div class=\"all-total\">\r\n          <div class=\"price\">\r\n            <span>合计：</span>\r\n            <span\r\n              >¥ <i class=\"totalPrice\">{{ getRePrice }}</i></span\r\n            >\r\n          </div>\r\n          <div\r\n            v-if=\"isEditor\"\r\n            class=\"goPay\"\r\n            :class=\"{ disabled: getNeedCount === 0 }\"\r\n            @click=\"goPay\"\r\n          >\r\n            结算({{ getNeedCount }})\r\n          </div>\r\n          <div\r\n            v-else\r\n            @click=\"deleteMyCart\"\r\n            class=\"delete\"\r\n            :class=\"{ disabled: getNeedCount === 0 }\"\r\n          >\r\n            删除\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"empty-cart\" v-else>\r\n      <img src=\"@/assets/empty.png\" alt=\"\" />\r\n      <div class=\"tips\">您的购物车是空的, 快去逛逛吧</div>\r\n      <div class=\"btn\" @click=\"$router.push('/')\">去逛逛</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport CountBox from '@/components/CountBox.vue'\r\nimport { mapGetters, mapState } from 'vuex'\r\nexport default {\r\n  name: 'CartPage',\r\n  components: {\r\n    CountBox\r\n  },\r\n  data () {\r\n    return {\r\n      value: 1,\r\n      // op: true\r\n      isEditor: true\r\n    }\r\n  },\r\n  created () {\r\n    if (this.isToken) {\r\n      this.$store.dispatch('cart/getCartList')\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState('cart', ['cartList']),\r\n    ...mapGetters('cart', [\r\n      'getCartCount',\r\n      'getNeed',\r\n      'getNeedCount',\r\n      'getRePrice',\r\n      'isAllChecked'\r\n    ]),\r\n    isToken () {\r\n      return this.$store.getters.token\r\n    }\r\n  },\r\n  methods: {\r\n    changeCheck (id) {\r\n      this.$store.commit('cart/foundCheck', id)\r\n    },\r\n    allChecked () {\r\n      console.log('a')\r\n      this.$store.commit('cart/allChecked', !this.isAllChecked)\r\n    },\r\n    updateMyCart (goodsNum, goodsId, goodsSkuId) {\r\n      this.$store.dispatch('cart/upCart', { goodsNum, goodsId, goodsSkuId })\r\n      console.log(goodsNum, goodsId, goodsSkuId)\r\n    },\r\n    deleteMyCart () {\r\n      if (this.getNeedCount === 0) return\r\n      this.$store.dispatch('cart/subCart')\r\n      this.isEditor = true\r\n    },\r\n    goPay () {\r\n      if (this.getNeedCount > 0) {\r\n        this.$router.push({\r\n          path: '/pay',\r\n          query: {\r\n            mode: 'cart',\r\n            cartId: this.getNeed.map(item => item.id).join(',')\r\n          }\r\n        })\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    isEditor (value) {\r\n      if (value) {\r\n        console.log(value)\r\n        this.$store.commit('cart/allChecked', true)\r\n      } else {\r\n        console.log(value)\r\n        this.$store.commit('cart/allChecked', false)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n// 主题 padding\r\n.cart {\r\n  padding-top: 46px;\r\n  padding-bottom: 100px;\r\n  background-color: #f5f5f5;\r\n  min-height: 100vh;\r\n  .cart-title {\r\n    height: 40px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 0 10px;\r\n    font-size: 14px;\r\n    .all {\r\n      i {\r\n        font-style: normal;\r\n        margin: 0 2px;\r\n        color: #fa2209;\r\n        font-size: 16px;\r\n      }\r\n    }\r\n    .edit {\r\n      .van-icon {\r\n        font-size: 18px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .cart-item {\r\n    margin: 0 10px 10px 10px;\r\n    padding: 10px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    background-color: #ffffff;\r\n    border-radius: 5px;\r\n\r\n    .show img {\r\n      width: 100px;\r\n      height: 100px;\r\n    }\r\n    .info {\r\n      width: 210px;\r\n      padding: 10px 5px;\r\n      font-size: 14px;\r\n      display: flex;\r\n      flex-direction: column;\r\n      justify-content: space-between;\r\n\r\n      .bottom {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        .price {\r\n          display: flex;\r\n          align-items: flex-end;\r\n          color: #fa2209;\r\n          font-size: 12px;\r\n          span {\r\n            font-size: 16px;\r\n          }\r\n        }\r\n        .count-box {\r\n          display: flex;\r\n          width: 110px;\r\n          .add,\r\n          .minus {\r\n            width: 30px;\r\n            height: 30px;\r\n            outline: none;\r\n            border: none;\r\n          }\r\n          .inp {\r\n            width: 40px;\r\n            height: 30px;\r\n            outline: none;\r\n            border: none;\r\n            background-color: #efefef;\r\n            text-align: center;\r\n            margin: 0 5px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.footer-fixed {\r\n  position: fixed;\r\n  left: 0;\r\n  bottom: 50px;\r\n  height: 50px;\r\n  width: 100%;\r\n  border-bottom: 1px solid #ccc;\r\n  background-color: #fff;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 0 10px;\r\n\r\n  .all-check {\r\n    display: flex;\r\n    align-items: center;\r\n    .van-checkbox {\r\n      margin-right: 5px;\r\n    }\r\n  }\r\n\r\n  .all-total {\r\n    display: flex;\r\n    line-height: 36px;\r\n    .price {\r\n      font-size: 14px;\r\n      margin-right: 10px;\r\n      .totalPrice {\r\n        color: #fa2209;\r\n        font-size: 18px;\r\n        font-style: normal;\r\n      }\r\n    }\r\n\r\n    .goPay,\r\n    .delete {\r\n      min-width: 100px;\r\n      height: 36px;\r\n      line-height: 36px;\r\n      text-align: center;\r\n      background-color: #fa2f21;\r\n      color: #fff;\r\n      border-radius: 18px;\r\n      &.disabled {\r\n        background-color: #ff9779;\r\n      }\r\n    }\r\n  }\r\n}\r\n.empty-cart {\r\n  padding: 80px 30px;\r\n  img {\r\n    width: 140px;\r\n    height: 92px;\r\n    display: block;\r\n    margin: 0 auto;\r\n  }\r\n  .tips {\r\n    text-align: center;\r\n    color: #666;\r\n    margin: 30px;\r\n  }\r\n  .btn {\r\n    width: 110px;\r\n    height: 32px;\r\n    line-height: 32px;\r\n    text-align: center;\r\n    background-color: #fa2c20;\r\n    border-radius: 16px;\r\n    color: #fff;\r\n    display: block;\r\n    margin: 0 auto;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./cart.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./cart.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./cart.vue?vue&type=template&id=34c0392d&scoped=true\"\nimport script from \"./cart.vue?vue&type=script&lang=js\"\nexport * from \"./cart.vue?vue&type=script&lang=js\"\nimport style0 from \"./cart.vue?vue&type=style&index=0&id=34c0392d&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"34c0392d\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","isToken","cartList","length","_v","_s","getCartCount","on","$event","isEditor","_l","item","key","goods_id","isChecked","changeCheck","goods","goods_image","goods_name","goods_price_min","goods_num","val","updateMyCart","goods_sku_id","allChecked","isAllChecked","getRePrice","class","disabled","getNeedCount","goPay","deleteMyCart","require","$router","push","staticRenderFns","name","components","CountBox","data","value","created","$store","dispatch","computed","mapState","mapGetters","getters","token","methods","id","commit","console","log","goodsNum","goodsId","goodsSkuId","path","query","mode","cartId","getNeed","map","join","watch","component"],"sourceRoot":""}